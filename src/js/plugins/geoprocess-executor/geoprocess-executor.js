/*! For license information please see main.js.LICENSE.txt */
var GeoserviceFactory;!function(){var e={660:function(e,t,n){var r;!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),s=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:s=o(r.Reflect,s),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",s=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,i={__proto__:[]}instanceof Array,a=!o&&!i,p={create:o?function(){return A(Object.create(null))}:i?function(){return A({__proto__:null})}:function(){return A({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),w="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,c=w||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[s]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,s=n+1;s<r;s++)this._keys[s-1]=this._keys[s],this._values[s-1]=this._values[s];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,i)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[s]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function i(e,t){return[e,t]}}():Map,l=w||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new c}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[s]=function(){return this.keys()},e}():Set,f=new(w||"function"!=typeof WeakMap?function(){var e=p.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=s(e,!1);return void 0!==t&&p.has(t,this._key)},e.prototype.get=function(e){var t=s(e,!1);return void 0!==t?p.get(t,this._key):void 0},e.prototype.set=function(e,t){return s(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=s(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+i()}while(p.has(e,t));return e[t]=!0,t}function s(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:p.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function i(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var s=t[r];4!==r&&6!==r&&8!==r||(n+="-"),s<16&&(n+="0"),n+=s.toString(16).toLowerCase()}return n}}():WeakMap);function h(e,t,n){var r=f.get(e);if(D(r)){if(!n)return;r=new c,f.set(e,r)}var s=r.get(t);if(D(s)){if(!n)return;s=new c,r.set(t,s)}return s}function g(e,t,n){if(d(e,t,n))return!0;var r=k(t);return!E(r)&&g(e,r,n)}function d(e,t,n){var r=h(t,n,!1);return!D(r)&&!!r.has(e)}function m(e,t,n){if(d(e,t,n))return y(e,t,n);var r=k(t);return E(r)?void 0:m(e,r,n)}function y(e,t,n){var r=h(t,n,!1);if(!D(r))return r.get(e)}function v(e,t,n,r){h(n,r,!0).set(e,t)}function x(e,t){var n=I(e,t),r=k(e);if(null===r)return n;var s=x(r,t);if(s.length<=0)return n;if(n.length<=0)return s;for(var o=new l,i=[],a=0,p=n;a<p.length;a++){var u=p[a];o.has(u)||(o.add(u),i.push(u))}for(var w=0,c=s;w<c.length;w++)u=c[w],o.has(u)||(o.add(u),i.push(u));return i}function I(e,t){var n=[],r=h(e,t,!1);if(D(r))return n;for(var o=function(e){var t=C(e,s);if(!T(t))throw new TypeError;var n=t.call(e);if(!S(n))throw new TypeError;return n}(r.keys()),i=0;;){var a=O(o);if(!a)return n.length=i,n;var p=a.value;try{n[i]=p}catch(e){try{F(o)}finally{throw e}}i++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function D(e){return void 0===e}function E(e){return null===e}function S(e){return"object"==typeof e?null!==e:"function"==typeof e}function L(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",s=C(e,r);if(void 0!==s){var o=s.call(e,n);if(S(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(T(n)&&!S(s=n.call(e)))return s;if(T(r=e.valueOf)&&!S(s=r.call(e)))return s}else{var r;if(T(r=e.valueOf)&&!S(s=r.call(e)))return s;var s,o=e.toString;if(T(o)&&!S(s=o.call(e)))return s}throw new TypeError}(e,"default"===n?"number":n)}function P(e){var t=L(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function R(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"function"==typeof e}function b(e){return"function"==typeof e}function C(e,t){var n=e[t];if(null!=n){if(!T(n))throw new TypeError;return n}}function O(e){var t=e.next();return!t.done&&t}function F(e){var t=e.return;t&&t.call(e)}function k(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var s=r.constructor;return"function"!=typeof s||s===e?t:s}function A(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(D(n)){if(!R(e))throw new TypeError;if(!b(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!D(r)&&!E(r)){if(!b(r))throw new TypeError;t=r}}return t}(e,t)}if(!R(e))throw new TypeError;if(!S(t))throw new TypeError;if(!S(r)&&!D(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(e,t,n,r){for(var s=e.length-1;s>=0;--s){var o=(0,e[s])(t,n,r);if(!D(o)&&!E(o)){if(!S(o))throw new TypeError;r=o}}return r}(e,t,n=P(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!S(n))throw new TypeError;if(!D(r)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;v(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!S(n))throw new TypeError;return D(r)||(r=P(r)),v(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return D(n)||(n=P(n)),g(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return D(n)||(n=P(n)),d(e,t,n)})),e("getMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return D(n)||(n=P(n)),m(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return D(n)||(n=P(n)),y(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!S(e))throw new TypeError;return D(t)||(t=P(t)),x(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!S(e))throw new TypeError;return D(t)||(t=P(t)),I(e,t)})),e("deleteMetadata",(function(e,t,n){if(!S(t))throw new TypeError;D(n)||(n=P(n));var r=h(t,n,!1);if(D(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var s=f.get(t);return s.delete(n),s.size>0||f.delete(t),!0}))}(s)}()}(r||(r={}))}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";var e;n.r(r),n.d(r,{Contour:function(){return ve},ElevationOfPoint:function(){return Te},ElevationOfPointResponseType:function(){return Ee},ElevationProfile:function(){return Ye},ElevationProfileResponseType:function(){return We},HealthCheck:function(){return Ze},WaterRise:function(){return at}}),n(660),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(e||(e={}));var t=e,s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return i}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}function u(e){return!!e.useClass}function w(e){return!!e.useFactory}var c=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,n=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(t=e(n.wrap()),r=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t[0]=e();var s=Reflect[n];return s.apply(void 0,p(t))}})),t},e}();function l(e){return"string"==typeof e||"symbol"==typeof e}function f(e){return"object"==typeof e&&"token"in e&&"transform"in e}function h(e){return!!e.useToken}function g(e){return null!=e.useValue}var d=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(d),y=function(){this.scopedResolutions=new Map};var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(d),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(d),I=function(){this.preResolution=new v,this.postResolution=new x},_=new Map,D=new(function(){function e(e){this.parent=e,this._registry=new m,this.interceptors=new I}return e.prototype.register=function(e,n,r){var s;if(void 0===r&&(r={lifecycle:t.Transient}),s=function(e){return u(e)||g(e)||h(e)||w(e)}(n)?n:{useClass:n},h(s))for(var o=[e],i=s;null!=i;){var a=i.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+p(o,[a]).join(" -> "));o.push(a);var c=this._registry.get(a);i=c&&h(c.provider)?c.provider:null}if((r.lifecycle===t.Singleton||r.lifecycle==t.ContainerScoped||r.lifecycle==t.ResolutionScoped)&&(g(s)||w(s)))throw new Error('Cannot use lifecycle "'+t[r.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:s,options:r}),this},e.prototype.registerType=function(e,t){return l(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,n){if(l(e)){if(l(n))return this.register(e,{useToken:n},{lifecycle:t.Singleton});if(n)return this.register(e,{useClass:n},{lifecycle:t.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var r=e;return n&&!l(n)&&(r=n),this.register(e,{useClass:r},{lifecycle:t.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new y);var n=this.getRegistration(e);if(!n&&l(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof c}(e))return r=this.construct(e,t),this.executePostResolutionInterceptor(e,r,"Single"),r;throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var s=[];try{for(var o=i(this.interceptors.preResolution.getAll(e)),a=o.next();!a.done;a=o.next()){var p=a.value;"Once"!=p.options.frequency&&s.push(p),p.callback(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,s)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var r,s;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var a=i(this.interceptors.postResolution.getAll(e)),p=a.next();!p.done;p=a.next()){var u=p.value;"Once"!=u.options.frequency&&o.push(u),u.callback(e,t,n)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,o)}},e.prototype.resolveRegistration=function(e,n){if(e.options.lifecycle===t.ResolutionScoped&&n.scopedResolutions.has(e))return n.scopedResolutions.get(e);var r,s=e.options.lifecycle===t.Singleton,o=e.options.lifecycle===t.ContainerScoped,i=s||o;return r=g(e.provider)?e.provider.useValue:h(e.provider)?i?e.instance||(e.instance=this.resolve(e.provider.useToken,n)):this.resolve(e.provider.useToken,n):u(e.provider)?i?e.instance||(e.instance=this.construct(e.provider.useClass,n)):this.construct(e.provider.useClass,n):w(e.provider)?e.provider.useFactory(this):this.construct(e.provider,n),e.options.lifecycle===t.ResolutionScoped&&n.scopedResolutions.set(e,r),r},e.prototype.resolveAll=function(e,t){var n=this;void 0===t&&(t=new y);var r=this.getAllRegistrations(e);if(!r&&l(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var s=r.map((function(e){return n.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,s,"All"),s}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;try{for(var n=i(this._registry.entries()),r=n.next();!r.done;r=n.next()){var s=a(r.value,2),o=s[0],p=s[1];this._registry.setAll(o,p.filter((function(e){return!g(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var n,r,s=new e(this);try{for(var o=i(this._registry.entries()),p=o.next();!p.done;p=o.next()){var u=a(p.value,2),w=u[0],c=u[1];c.some((function(e){return e.options.lifecycle===t.ContainerScoped}))&&s._registry.setAll(w,c.map((function(e){return e.options.lifecycle===t.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},e.prototype.beforeResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof c)return e.createProxy((function(e){return n.resolve(e,t)}));var r=_.get(e);if(!r||0===r.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var s=r.map(this.resolveParams(t,e));return new(e.bind.apply(e,p([void 0],s)))},e.prototype.resolveParams=function(e,t){var n=this;return function(r,s){var o,i,u,w;try{return"object"==typeof(w=r)&&"token"in w&&"multiple"in w?f(r)?r.multiple?(o=n.resolve(r.transform)).transform.apply(o,p([n.resolveAll(r.token)],r.transformArgs)):(i=n.resolve(r.transform)).transform.apply(i,p([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):f(r)?(u=n.resolve(r.transform,e)).transform.apply(u,p([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(e){throw new Error(function(e,t,n){var r,s,o,i,u=a(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1];return r="Cannot inject the dependency "+(i=t,(null===(o=void 0===u?null:u)?"at position #"+i:'"'+o.split(",")[i].trim()+'" at position #'+i)+' of "')+e.name+'" constructor. Reason:',void 0===s&&(s="    "),p([r],n.message.split("\n").map((function(e){return s+e}))).join("\n")}(t,s,e))}}},e}()),E="injectionTokens",S=function(e){return t=e,function(e,n,r){var s=Reflect.getOwnMetadata(E,e)||{};s[r]=t,Reflect.defineMetadata(E,s,e)};var t},L=function(){return function(e){_.set(e,function(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(E,e)||{};return Object.keys(n).forEach((function(e){t[+e]=n[e]})),t}(e))}};if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");class P{constructor(e){this._value=e,this.ensureIsValidValue()}get value(){return this._value}ensureIsValidValue(){if(isNaN(this._value))throw RangeError("The value must be a number")}}class R extends P{constructor(e){super(e),this.ensureIsValidEquidistance()}ensureIsValidEquidistance(){if(this.value<10||this.value>1e4)throw RangeError("The equidistance must be between 10 and 10000")}}class T extends P{constructor(e){super(e),this.ensureIsValidLatitude()}ensureIsValidLatitude(){if(this.value<-84||this.value>-20)throw RangeError("The latitud must be between -84 and -20")}}class b{constructor(e){this._value=e,this.ensureIsValidValue()}get value(){return this._value}ensureIsValidValue(){if(""===this._value)throw RangeError("The value cannot be empty")}}class C extends b{constructor(e){super(e)}}class O extends P{constructor(e){super(e),this.ensureIsValidLongitude()}ensureIsValidLongitude(){if(this.value<-74||this.value>-52)throw RangeError("The longitude must be between -74 and -52")}}class F{constructor(e,t){this._longitude=e,this._latitude=t}get value(){return[this._longitude,this._latitude]}get longitude(){return this._longitude}get latitude(){return this._latitude}get toString(){return`${this._longitude.value},${this._latitude.value}`}toProcessString(){return`${this._longitude.value} ${this._latitude.value}`}static createFromString(e){const t=e.split(" ");return new F(new O(parseFloat(t[0])),new T(parseFloat(t[1])))}}class k{constructor(e){this._value=e}static createFromString(e){const t=[];return e.trim().replace("\n","").replace("  "," ").replace("  "," ").split(",").forEach((e=>{const n=e.trim().split(" ");t.push(new F(new O(parseFloat(n[0])),new T(parseFloat(n[1]))))})),new k(t)}get value(){return this._value}toString(){const e=[];return this.value.forEach((t=>{e.push(t.toString)})),`[[${e.join("],[")}]]`}coordinates(){const e=`{\n      "type": "FeatureCollection",\n      "name": "test",\n      "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },\n      "features": [\n        { "type": "Feature", "properties": { }, "geometry": { "type": "Polygon", "coordinates": [ ${this.toString()} ] } }\n      ]\n    }`;return JSON.parse(e).features[0].geometry.coordinates}}class A extends b{constructor(e){super(e)}}class M{post(e,t){return n=this,r=void 0,o=function*(){return(yield fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"text/plain"},redirect:"follow",referrerPolicy:"no-referrer",body:t})).json()},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,a)}p((o=o.apply(n,r||[])).next())}));var n,r,s,o}}class j{constructor(e,t,n,r,s,o,i){this._longitudeLower=e,this._latitudeLower=t,this._longitudeUpper=n,this._latitudeUpper=r,this._equidistance=s,this._wpsEndpoint=o,this._mdeLayerFullname=i}get longitudeLower(){return this._longitudeLower}get latitudeLower(){return this._latitudeLower}get longitudeUpper(){return this._longitudeUpper}get latitudeUpper(){return this._latitudeUpper}get equidistance(){return this._equidistance}get wpsEndpoint(){return this._wpsEndpoint}get fullWpsEndpoint(){return`${this.wpsEndpoint.value}&request=Execute&identifier=gs:Contour`}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Contour</ows:Identifier>\n    <wps:DataInputs>\n      <wps:Input>\n        <ows:Identifier>data</ows:Identifier>\n        <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n          <wps:Body>\n            <wcs:GetCoverage service="WCS" version="1.1.1">\n              <ows:Identifier>${this._mdeLayerFullname.value}</ows:Identifier>\n              <wcs:DomainSubset>\n                <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                  <ows:LowerCorner>${this._longitudeLower.value} ${this._latitudeLower.value}</ows:LowerCorner>\n                  <ows:UpperCorner>${this._longitudeUpper.value} ${this._latitudeUpper.value}</ows:UpperCorner>\n                </ows:BoundingBox>\n              </wcs:DomainSubset>\n              <wcs:Output format="image/tiff"/>\n            </wcs:GetCoverage>\n          </wps:Body>\n        </wps:Reference>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>band</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>0</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>simplify</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>true</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>smooth</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>false</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>interval</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>${this._equidistance.value}</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n      <wps:RawDataOutput mimeType="application/json">\n        <ows:Identifier>result</ows:Identifier>\n      </wps:RawDataOutput>\n    </wps:ResponseForm>\n  </wps:Execute>`}}j.MAX_AREA_ALLOWED=1e8,j.MIN_VALLEY_EQUIDISTANCE_ALLOWED=10,j.MIN_MOUNTAIN_EQUIDISTANCE_ALLOWED=10,j.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["rectangle"],\n        "points": ["ne", "sw"]\n      },\n      {\n        "name": "Equidistancia",\n        "element": "input",\n        "type": "number",\n        "min": 10,\n        "max": 10000\n      }\n    ]');class B{constructor(e,t,n){this._polygon=e,this._equidistance=t,this._wpsEndpoint=n,this._baseRasterLayer=new b("geoprocess:alos_unificado")}get polygon(){return this._polygon}get equidistance(){return this._equidistance}rectangle(){return this._polygon.toString()}get wpsEndpoint(){return this._wpsEndpoint}get fullWpsEndpoint(){return`${this.wpsEndpoint.value}&request=Execute&identifier=gs:Contour`}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Contour</ows:Identifier>\n    <wps:DataInputs>\n      <wps:Input>\n        <ows:Identifier>data</ows:Identifier>\n        <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wps" method="POST">\n            <wps:Body>\n              \n              \x3c!-- ras:CropCoverage --\x3e\n              <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                <ows:Identifier>ras:CropCoverage</ows:Identifier>\n                <wps:DataInputs>\n                  <wps:Input>\n                    <ows:Identifier>coverage</ows:Identifier>\n                    <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n                      <wps:Body>\n                        <wcs:GetCoverage service="WCS" version="1.1.1">\n                          <ows:Identifier>${this._baseRasterLayer.value}</ows:Identifier>\n                          <wcs:DomainSubset>\n                            <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                              <ows:LowerCorner>-74.000000946 -55.666705466</ows:LowerCorner>\n                              <ows:UpperCorner>-53.499547847 -21.666460109</ows:UpperCorner>\n                            </ows:BoundingBox>\n                          </wcs:DomainSubset>\n                          <wcs:Output format="image/tiff"/>\n                        </wcs:GetCoverage>\n                      </wps:Body>\n                    </wps:Reference>\n                  </wps:Input>\n                  <wps:Input>\n                    <ows:Identifier>cropShape</ows:Identifier>\n                    <wps:Data>\n                      <wps:ComplexData mimeType="application/json"><![CDATA[{\n                        "geometry": {\n                        "type": "Polygon",\n                        "coordinates": [ ${this.rectangle()} ] } }]]>\n                      </wps:ComplexData>\n                    </wps:Data>\n                  </wps:Input>\n                </wps:DataInputs>\n                <wps:ResponseForm>\n                  <wps:RawDataOutput mimeType="image/tiff">\n                    <ows:Identifier>result</ows:Identifier>\n                  </wps:RawDataOutput>\n                </wps:ResponseForm>\n              </wps:Execute>\n              \x3c!-- /ras:CropCoverage --\x3e\n  \n            </wps:Body>\n          </wps:Reference>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>interval</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>${this._equidistance.value}</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n      <wps:RawDataOutput mimeType="application/json">\n        <ows:Identifier>result</ows:Identifier>\n      </wps:RawDataOutput>\n    </wps:ResponseForm>\n  </wps:Execute>`}}B.MAX_AREA_ALLOWED=1e8,B.MIN_VALLEY_EQUIDISTANCE_ALLOWED=10,B.MIN_MOUNTAIN_EQUIDISTANCE_ALLOWED=10,B.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["rectangle"],\n        "points": ["ne", "sw"]\n      },\n      {\n        "name": "Equidistancia",\n        "element": "input",\n        "type": "number",\n        "min": 10,\n        "max": 10000\n      }\n    ]');var $=6371008.8,N={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*$,kilometers:6371.0088,kilometres:6371.0088,meters:$,metres:$,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:$/1852,radians:1,yards:6967335.223679999};function W(e,t,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function q(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X(e[0])||!X(e[1]))throw new Error("coordinates must contain numbers");return W({type:"Point",coordinates:e},t,n)}function U(e,t,n){void 0===n&&(n={});for(var r=0,s=e;r<s.length;r++){var o=s[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return W({type:"Polygon",coordinates:e},t,n)}function V(e){return e%(2*Math.PI)*180/Math.PI}function G(e){return e%360*Math.PI/180}function X(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function J(e,t,n){if(null!==e)for(var r,s,o,i,a,p,u,w,c=0,l=0,f=e.type,h="FeatureCollection"===f,g="Feature"===f,d=h?e.features.length:1,m=0;m<d;m++){a=(w=!!(u=h?e.features[m].geometry:g?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<a;y++){var v=0,x=0;if(null!==(i=w?u.geometries[y]:u)){p=i.coordinates;var I=i.type;switch(c=!n||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===t(p,l,m,v,x))return!1;l++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(!1===t(p[r],l,m,v,x))return!1;l++,"MultiPoint"===I&&v++}"LineString"===I&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(s=0;s<p[r].length-c;s++){if(!1===t(p[r][s],l,m,v,x))return!1;l++}"MultiLineString"===I&&v++,"Polygon"===I&&x++}"Polygon"===I&&v++;break;case"MultiPolygon":for(r=0;r<p.length;r++){for(x=0,s=0;s<p[r].length;s++){for(o=0;o<p[r][s].length-c;o++){if(!1===t(p[r][s][o],l,m,v,x))return!1;l++}x++}v++}break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===J(i.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function K(e,t){var n,r,s,o,i,a,p,u,w,c,l=0,f="FeatureCollection"===e.type,h="Feature"===e.type,g=f?e.features.length:1;for(n=0;n<g;n++){for(a=f?e.features[n].geometry:h?e.geometry:e,u=f?e.features[n].properties:h?e.properties:{},w=f?e.features[n].bbox:h?e.bbox:void 0,c=f?e.features[n].id:h?e.id:void 0,i=(p=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,s=0;s<i;s++)if(null!==(o=p?a.geometries[s]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,l,u,w,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===t(o.geometries[r],l,u,w,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,l,u,w,c))return!1;l++}}function Q(e,t,n){var r=n,s=!1;return function(e,t){!function(e,t){K(e,(function(e,n,r,s,o){var i,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==t(W(e,r,{bbox:s,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":i="Point";break;case"MultiLineString":i="LineString";break;case"MultiPolygon":i="Polygon"}for(var p=0;p<e.coordinates.length;p++){var u=e.coordinates[p];if(!1===t(W({type:i,coordinates:u},r),n,p))return!1}}))}(e,(function(e,n,r){var s=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var i,a=0,p=0,u=0;return!1!==J(e,(function(o,w,c,l,f){if(void 0===i||n>a||l>p||f>u)return i=o,a=n,p=l,u=f,void(s=0);var h=function(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return W({type:"LineString",coordinates:e},t,n)}([i,o],e.properties);if(!1===t(h,n,r,f,s))return!1;s++,i=o}))&&void 0}}}))}(e,(function(e,o,i,a,p){r=!1===s&&void 0===n?e:t(r,e,o,i,a,p),s=!0})),r}var z=6378137;function H(e){return function(e,t,n){var r=0;return K(e,(function(e,t,n,s,o){r=r+function(e){var t,n=0;switch(e.type){case"Polygon":return Y(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=Y(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)})),r}(e)}function Y(e){var t=0;if(e&&e.length>0){t+=Math.abs(Z(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(Z(e[n]))}return t}function Z(e){var t,n,r,s,o,i,a=0,p=e.length;if(p>2){for(i=0;i<p;i++)i===p-2?(r=p-2,s=p-1,o=0):i===p-1?(r=p-1,s=0,o=1):(r=i,s=i+1,o=i+2),t=e[r],n=e[s],a+=(ee(e[o][0])-ee(t[0]))*Math.sin(ee(n[1]));a=a*z*z/2}return a}function ee(e){return e*Math.PI/180}function te(e){var t=[1/0,1/0,-1/0,-1/0];return J(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}te.default=te;var ne=te;function re(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function se(e){return"Feature"===e.type?e.geometry:e}function oe(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=re(e),s=se(t),o=s.type,i=t.bbox,a=s.coordinates;if(i&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(r,i))return!1;"Polygon"===o&&(a=[a]);for(var p=!1,u=0;u<a.length&&!p;u++)if(ie(r,a[u][0],n.ignoreBoundary)){for(var w=!1,c=1;c<a[u].length&&!w;)ie(r,a[u][c],!n.ignoreBoundary)&&(w=!0),c++;w||(p=!0)}return p}function ie(e,t,n){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var s=0,o=t.length-1;s<t.length;o=s++){var i=t[s][0],a=t[s][1],p=t[o][0],u=t[o][1];if(e[1]*(i-p)+a*(p-e[0])+u*(e[0]-i)==0&&(i-e[0])*(p-e[0])<=0&&(a-e[1])*(u-e[1])<=0)return!n;a>e[1]!=u>e[1]&&e[0]<(p-i)*(e[1]-a)/(u-a)+i&&(r=!r)}return r}function ae(e,t,n,r,s){var o=n[0],i=n[1],a=e[0],p=e[1],u=t[0],w=t[1],c=u-a,l=w-p,f=(n[0]-a)*l-(n[1]-p)*c;if(null!==s){if(Math.abs(f)>s)return!1}else if(0!==f)return!1;return r?"start"===r?Math.abs(c)>=Math.abs(l)?c>0?a<o&&o<=u:u<=o&&o<a:l>0?p<i&&i<=w:w<=i&&i<p:"end"===r?Math.abs(c)>=Math.abs(l)?c>0?a<=o&&o<u:u<o&&o<=a:l>0?p<=i&&i<w:w<i&&i<=p:"both"===r&&(Math.abs(c)>=Math.abs(l)?c>0?a<o&&o<u:u<o&&o<a:l>0?p<i&&i<w:w<i&&i<p):Math.abs(c)>=Math.abs(l)?c>0?a<=o&&o<=u:u<=o&&o<=a:l>0?p<=i&&i<=w:w<=i&&i<=p}var pe=function(e,t,n){void 0===n&&(n={});for(var r=re(e),s=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t),o=0;o<s.length-1;o++){var i=!1;if(n.ignoreEndVertices&&(0===o&&(i="start"),o===s.length-2&&(i="end"),0===o&&o+1===s.length-1&&(i="both")),ae(s[o],s[o+1],r,i,void 0===n.epsilon?null:n.epsilon))return!0}return!1};function ue(e,t){var n=se(e),r=se(t),s=n.type,o=r.type,i=n.coordinates,a=r.coordinates;switch(s){case"Point":switch(o){case"Point":return ce(i,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(e,t){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(ce(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(e,t){for(var n=0,r=t.coordinates;n<r.length;n++){for(var s=r[n],o=!1,i=0,a=e.coordinates;i<a.length;i++)if(ce(s,a[i])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return pe(r,n,{ignoreEndVertices:!0});case"LineString":return function(e,t){for(var n=!1,r=0,s=t.coordinates;r<s.length;r++){var o=s[r];if(pe({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(n=!0),!pe({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(e,t){for(var n=!1,r=0,s=t.coordinates;r<s.length;r++){var o=s[r];if(pe(o,e,{ignoreEndVertices:!0})&&(n=!0),!pe(o,e))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return oe(r,n,{ignoreBoundary:!0});case"LineString":return function(e,t){var n,r,s=!1,o=0;if(!we(ne(e),ne(t)))return!1;for(;o<t.coordinates.length-1;o++)if(oe({type:"Point",coordinates:(n=t.coordinates[o],r=t.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2])},e,{ignoreBoundary:!0})){s=!0;break}return s}(n,r);case"Polygon":return function(e,t){if("Feature"===e.type&&null===e.geometry)return!1;if("Feature"===t.type&&null===t.geometry)return!1;if(!we(ne(e),ne(t)))return!1;for(var n=0,r=se(t).coordinates;n<r.length;n++)for(var s=0,o=r[n];s<o.length;s++)if(!oe(o[s],e))return!1;return!0}(n,r);case"MultiPoint":return function(e,t){for(var n=0,r=t.coordinates;n<r.length;n++)if(!oe(r[n],e,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+s+" geometry not supported")}}function we(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function ce(e,t){return e[0]===t[0]&&e[1]===t[1]}let le=class{ensureInputDataIsInTolerance(e){const t=this.pointsToPolygon(e.longitudeLower,e.latitudeLower,e.longitudeUpper,e.latitudeUpper);if(H(t)>j.MAX_AREA_ALLOWED)throw RangeError("The area requested must be less than 100km2");if(1==ue(U([[[-73.90444332754741,-51.88846973694263],[-70.88203831519283,-20.86255705909867],[-62.863412772211284,-21.417692673612777],[-64.34377441091557,-28.69613739724218],[-62.67836756737324,-28.881182602080212],[-66.50263513402598,-52.690332291240786],[-73.90444332754741,-51.88846973694263]]]),t)&&e.equidistance.value<j.MIN_MOUNTAIN_EQUIDISTANCE_ALLOWED)throw RangeError("Equidistance must be grather than 100");if(e.equidistance.value<j.MIN_VALLEY_EQUIDISTANCE_ALLOWED)throw RangeError("Equidistance must be grather than 10")}pointsToPolygon(e,t,n,r){return U([[[n.value,r.value],[n.value,t.value],[e.value,t.value],[e.value,r.value],[n.value,r.value]]])}ensureInputDataIsInToleranceV2(e){const t=this.pointsToPolygonV2(e.polygon);if(H(t)>B.MAX_AREA_ALLOWED)throw RangeError("The area requested must be less than 100km2");if(1==ue(U([[[-73.90444332754741,-51.88846973694263],[-70.88203831519283,-20.86255705909867],[-62.863412772211284,-21.417692673612777],[-64.34377441091557,-28.69613739724218],[-62.67836756737324,-28.881182602080212],[-66.50263513402598,-52.690332291240786],[-73.90444332754741,-51.88846973694263]]]),t)&&e.equidistance.value<j.MIN_MOUNTAIN_EQUIDISTANCE_ALLOWED)throw RangeError("Equidistance must be grather than 100");if(e.equidistance.value<j.MIN_VALLEY_EQUIDISTANCE_ALLOWED)throw RangeError("Equidistance must be grather than 10")}pointsToPolygonV2(e){return U(e.coordinates())}};le=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L()],le);var fe=le,he=function(e,t){return function(n,r){t(n,r,e)}},ge=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{p(r.next(e))}catch(e){o(e)}}function a(e){try{p(r.throw(e))}catch(e){o(e)}}function p(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}p((r=r.apply(e,t||[])).next())}))};let de=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return j.FIELDS}execute(e){return ge(this,void 0,void 0,(function*(){return this.ensureInputDataIsInTolerance(e),yield this.postman.post(e.fullWpsEndpoint,e.xmlInput)}))}executeV2(e){return ge(this,void 0,void 0,(function*(){return this.ensureInputDataIsInToleranceV2(e),yield this.postman.post(e.fullWpsEndpoint,e.xmlInput)}))}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}ensureInputDataIsInToleranceV2(e){this.tolaranceChecker.ensureInputDataIsInToleranceV2(e)}};de=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L(),he(0,S("Postman")),he(1,S("ContourToleranceChecker"))],de);var me=de,ye=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{p(r.next(e))}catch(e){o(e)}}function a(e){try{p(r.throw(e))}catch(e){o(e)}}function p(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}p((r=r.apply(e,t||[])).next())}))};D.register("Postman",{useClass:M}),D.register("ContourToleranceChecker",{useClass:fe});class ve{constructor(e,t,n){this.host=e,this.mdeLayerFullname=t,this.service=n||D.resolve(me)}getFields(){return this.service.getFields()}execute(e,t,n,r,s){return ye(this,void 0,void 0,(function*(){const o=new j(new O(e),new T(t),new O(n),new T(r),new R(s),new A(this.host),new C(this.mdeLayerFullname));return this.service.execute(o)}))}executeV2(e,t){return ye(this,void 0,void 0,(function*(){const n=new B(k.createFromString(e),new R(t),new A(this.host));return this.service.executeV2(n)}))}}class xe{constructor(e,t,n){this._point=e,this._wpsEndpoint=t,this._mdeLayerFullname=n}get point(){return this._point}get wpsEndpoint(){return this._wpsEndpoint}get mdeLayerShortname(){return this._mdeLayerFullname.value.indexOf(":")<0?this._mdeLayerFullname.value:this._mdeLayerFullname.value.split(":")[1]}get toString(){return this._point.toString}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?>\n\n\n    \x3c!-- IntersectionFeatureCollection --\x3e\n    <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n      <ows:Identifier>gs:IntersectionFeatureCollection</ows:Identifier>\n      <wps:DataInputs>\n        <wps:Input>\n          <ows:Identifier>first feature collection</ows:Identifier>\n          <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n            <wps:Body>\n          \n          \n              \x3c!-- BufferFeatureCollection --\x3e\n              <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                <ows:Identifier>vec:BufferFeatureCollection</ows:Identifier>\n                <wps:DataInputs>\n                  <wps:Input>\n                    <ows:Identifier>features</ows:Identifier>\n                    <wps:Data>\n                      <wps:ComplexData mimeType="application/json"><![CDATA[{\n              "features": [\n              { "type": "Feature", "properties": { }, "geometry": { "type": "Point", "coordinates": [ ${this.toString} ] } }\n              ]\n              }]]></wps:ComplexData>\n                    </wps:Data>\n                  </wps:Input>\n                  <wps:Input>\n                    <ows:Identifier>distance</ows:Identifier>\n                    <wps:Data>\n                      <wps:LiteralData>0.0000001</wps:LiteralData>\n                    </wps:Data>\n                  </wps:Input>\n                </wps:DataInputs>\n                <wps:ResponseForm>\n                  <wps:RawDataOutput mimeType="application/json">\n                    <ows:Identifier>result</ows:Identifier>\n                  </wps:RawDataOutput>\n                </wps:ResponseForm>\n              </wps:Execute>\n              \x3c!-- /BufferFeatureCollection --\x3e\n    \n    \n    \n            </wps:Body>\n          </wps:Reference>\n        </wps:Input>\n        <wps:Input>\n          <ows:Identifier>second feature collection</ows:Identifier>\n          <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n            <wps:Body>\n    \n    \n              \x3c!-- PolygonExtraction --\x3e\n              <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                <ows:Identifier>ras:PolygonExtraction</ows:Identifier>\n                <wps:DataInputs>\n                  <wps:Input>\n                    <ows:Identifier>data</ows:Identifier>\n                    <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wps" method="POST">\n                      <wps:Body>\n                          \n    \n    \n                        \x3c!-- CropCoverage --\x3e\n                        <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                          <ows:Identifier>ras:CropCoverage</ows:Identifier>\n                          <wps:DataInputs>\n                            <wps:Input>\n                              <ows:Identifier>coverage</ows:Identifier>\n                              <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n                                <wps:Body>\n                                  <wcs:GetCoverage service="WCS" version="1.1.1">\n                                    <ows:Identifier>${this._mdeLayerFullname.value}</ows:Identifier>\n                                    <wcs:DomainSubset>\n                                      <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                                        <ows:LowerCorner>-74.000000946 -55.666705466</ows:LowerCorner>\n                                        <ows:UpperCorner>-53.499547847 -21.666460109</ows:UpperCorner>\n                                      </ows:BoundingBox>\n                                    </wcs:DomainSubset>\n                                    <wcs:Output format="image/tiff"/>\n                                  </wcs:GetCoverage>\n                                </wps:Body>\n                              </wps:Reference>\n                            </wps:Input>\n                            <wps:Input>\n                              <ows:Identifier>cropShape</ows:Identifier>\n                              <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n                                <wps:Body>\n    \n    \n                                    \x3c!-- Buffer --\x3e\n                                    <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                                            <ows:Identifier>geo:buffer</ows:Identifier>\n                                            <wps:DataInputs>\n                                                <wps:Input>\n                                                <ows:Identifier>geom</ows:Identifier>\n                                                <wps:Data>\n                                                    <wps:ComplexData mimeType="application/json"><![CDATA[{\n                                                    "geometry": { "type": "Point", "coordinates": [ ${this.toString} ]\n                                                    } }]]></wps:ComplexData>\n                                                </wps:Data>\n                                                </wps:Input>\n                                                <wps:Input>\n                                                <ows:Identifier>distance</ows:Identifier>\n                                                <wps:Data>\n                                                    <wps:LiteralData>0.003</wps:LiteralData>\n                                                </wps:Data>\n                                                </wps:Input>\n                                                <wps:Input>\n                                                <ows:Identifier>capStyle</ows:Identifier>\n                                                <wps:Data>\n                                                    <wps:LiteralData>Square</wps:LiteralData>\n                                                </wps:Data>\n                                                </wps:Input>\n                                            </wps:DataInputs>\n                                            <wps:ResponseForm>\n                                                <wps:RawDataOutput mimeType="application/json">\n                                                <ows:Identifier>result</ows:Identifier>\n                                                </wps:RawDataOutput>\n                                            </wps:ResponseForm>\n                                    </wps:Execute>\n                                    \x3c!-- Buffer --\x3e\n    \n                                </wps:Body>\n                              </wps:Reference>\n                            </wps:Input>\n                          </wps:DataInputs>\n                          <wps:ResponseForm>\n                            <wps:RawDataOutput mimeType="image/tiff">\n                              <ows:Identifier>result</ows:Identifier>\n                            </wps:RawDataOutput>\n                          </wps:ResponseForm>\n                        </wps:Execute>\n                        \x3c!-- /CropCoverage --\x3e\n    \n    \n                      </wps:Body>\n                    </wps:Reference>\n                  </wps:Input>\n                  <wps:Input>\n                    <ows:Identifier>roi</ows:Identifier>\n                    <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n                      <wps:Body>\n    \n    \n                          \x3c!-- Buffer --\x3e\n                          <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                                <ows:Identifier>geo:buffer</ows:Identifier>\n                                <wps:DataInputs>\n                                    <wps:Input>\n                                    <ows:Identifier>geom</ows:Identifier>\n                                    <wps:Data>\n                                        <wps:ComplexData mimeType="application/json"><![CDATA[{\n                                        "geometry": { "type": "Point", "coordinates": [ ${this.toString} ]\n                                        } }]]></wps:ComplexData>\n                                    </wps:Data>\n                                    </wps:Input>\n                                    <wps:Input>\n                                    <ows:Identifier>distance</ows:Identifier>\n                                    <wps:Data>\n                                        <wps:LiteralData>0.001</wps:LiteralData>\n                                    </wps:Data>\n                                    </wps:Input>\n                                    <wps:Input>\n                                    <ows:Identifier>capStyle</ows:Identifier>\n                                    <wps:Data>\n                                        <wps:LiteralData>Square</wps:LiteralData>\n                                    </wps:Data>\n                                    </wps:Input>\n                                </wps:DataInputs>\n                                <wps:ResponseForm>\n                                    <wps:RawDataOutput mimeType="application/json">\n                                    <ows:Identifier>result</ows:Identifier>\n                                    </wps:RawDataOutput>\n                                </wps:ResponseForm>\n                          </wps:Execute>\n                          \x3c!-- Buffer --\x3e\n    \n    \n    \n                      </wps:Body>\n                    </wps:Reference>\n                  </wps:Input>\n                  <wps:Input>\n                    <ows:Identifier>band</ows:Identifier>\n                    <wps:Data>\n                      <wps:LiteralData>0</wps:LiteralData>\n                    </wps:Data>\n                  </wps:Input>\n                </wps:DataInputs>\n                <wps:ResponseForm>\n                  <wps:RawDataOutput mimeType="application/json">\n                    <ows:Identifier>result</ows:Identifier>\n                  </wps:RawDataOutput>\n                </wps:ResponseForm>\n              </wps:Execute>\n              \x3c!-- /PolygonExtraction --\x3e\n    \n    \n            </wps:Body>\n          </wps:Reference>\n        </wps:Input>\n      </wps:DataInputs>\n      <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n          <ows:Identifier>result</ows:Identifier>\n        </wps:RawDataOutput>\n      </wps:ResponseForm>\n    </wps:Execute>\n    \x3c!-- /IntersectionFeatureCollection --\x3e\n    `}}xe.MAX_LENGHT_ALLOWED=100,xe.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["point"]\n      }\n    ]');var Ie=function(e,t,n){void 0===n&&(n={});var r=re(e),s=re(t),o=G(s[1]-r[1]),i=G(s[0]-r[0]),a=G(r[1]),p=G(s[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(a)*Math.cos(p);return function(e,t){void 0===t&&(t="kilometers");var n=N[t];if(!n)throw new Error(t+" units is invalid");return e*n}(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)};function _e(e,t){return void 0===t&&(t={}),Q(e,(function(e,n){var r=n.geometry.coordinates;return e+Ie(r[0],r[1],t)}),0)}let De=class{ensureInputDataIsInTolerance(e){if(_e(W(JSON.parse(`\n      {\n        "type": "Point",\n        "coordinates": [${e.point.toString}]\n      }`)),{units:"kilometers"})>100)throw RangeError("The line length requested must be less than 100km")}};De=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L()],De);var Ee,Se=De;!function(e){e[e.Point3D=0]="Point3D",e[e.FeatureCollectionOfPoint=1]="FeatureCollectionOfPoint"}(Ee||(Ee={}));var Le=function(e,t){return function(n,r){t(n,r,e)}};let Pe=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return xe.FIELDS}execute(e,t){return n=this,r=void 0,o=function*(){this.ensureInputDataIsInTolerance(e);const n=yield this.postman.post(e.wpsEndpoint.value,e.xmlInput);return this.formatResponse(e,n,t)},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,a)}p((o=o.apply(n,r||[])).next())}));var n,r,s,o}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}postmanResponseToPoint3D(e,t){const n=e.toString;return JSON.parse('{ "type": "Point", "coordinates": ['+n+","+t.features[0].properties[e.mdeLayerShortname+"_value"]+"] }")}postmanResponseToFeatureCollection(e,t){const n=e.toString;return JSON.parse(`{\n        "type": "FeatureCollection",\n        "features": [\n          {\n            "type": "Feature",\n            "geometry": {\n              "type": "Point",\n              "coordinates": [\n                ${n}\n              ]\n            },\n            "properties": {\n              "height": ${t.features[0].properties[`${e.mdeLayerShortname}_value`]}\n            },\n            "id": "0"\n          }\n        ]\n      }`)}formatResponse(e,t,n){return e.toString,n===Ee.FeatureCollectionOfPoint?this.postmanResponseToFeatureCollection(e,t):this.postmanResponseToPoint3D(e,t)}};Pe=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L(),Le(0,S("Postman")),Le(1,S("ElevationOfPointToleranceChecker"))],Pe);var Re=Pe;D.register("Postman",{useClass:M}),D.register("ElevationOfPointToleranceChecker",{useClass:Se});class Te{constructor(e,t,n){this.host=e,this.mdeLayerFullname=t,this.service=n||D.resolve(Re)}getFields(){return this.service.getFields()}execute(e,t=Ee.Point3D){return n=this,r=void 0,o=function*(){const n=new xe(F.createFromString(e),new A(this.host),new C(this.mdeLayerFullname));return this.service.execute(n,t)},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,a)}p((o=o.apply(n,r||[])).next())}));var n,r,s,o}}class be{constructor(e){this._value=e}static createFromString(e){const t=[];return e.trim().replace("\n","").replace("  "," ").replace("  "," ").split(",").forEach((e=>{const n=e.trim().split(" ");t.push(new F(new O(parseFloat(n[0])),new T(parseFloat(n[1]))))})),new be(t)}get value(){return this._value}toString(){const e=[];return this.value.forEach((t=>{e.push(t.toString)})),`[${e.join("],[")}]`}toProcessString(){const e=[];return this.value.forEach((t=>{e.push(t.toProcessString())})),`${e.join(",")}`}subLine(e){const t=[];return this.value.forEach((function(n,r){r<=e&&t.push(n.toString)})),`[${t.join("],[")}]`}}function Ce(e,t,n){if(void 0===n&&(n={}),!0===n.final)return function(e,t){var n=Ce(t,e);return(n+180)%360}(e,t);var r=re(e),s=re(t),o=G(r[0]),i=G(s[0]),a=G(r[1]),p=G(s[1]),u=Math.sin(i-o)*Math.cos(p),w=Math.cos(a)*Math.sin(p)-Math.sin(a)*Math.cos(p)*Math.cos(i-o);return V(Math.atan2(u,w))}function Oe(e,t,n,r){void 0===r&&(r={});var s=re(e),o=G(s[0]),i=G(s[1]),a=G(n),p=function(e,t){void 0===t&&(t="kilometers");var n=N[t];if(!n)throw new Error(t+" units is invalid");return e/n}(t,r.units),u=Math.asin(Math.sin(i)*Math.cos(p)+Math.cos(i)*Math.sin(p)*Math.cos(a));return q([V(o+Math.atan2(Math.sin(a)*Math.sin(p)*Math.cos(i),Math.cos(p)-Math.sin(i)*Math.sin(u))),V(u)],r.properties)}function Fe(e,t,n){void 0===n&&(n={});for(var r=se(e).coordinates,s=0,o=0;o<r.length&&!(t>=s&&o===r.length-1);o++){if(s>=t){var i=t-s;if(i){var a=Ce(r[o],r[o-1])-180;return Oe(r[o],i,a,n)}return q(r[o])}s+=Ie(r[o],r[o+1],n)}return q(r[r.length-1])}class ke{constructor(){this._points=[]}add(e){this._points.push(e),this.reorderPointsByPositionInLine()}reorderPointsByPositionInLine(){this._points.sort(((e,t)=>e.positionInLine<t.positionInLine?-1:e.positionInLine>t.positionInLine?1:0))}get points(){return this._points}toString(){const e=[];return this._points.forEach((t=>{e.push(t.toString)})),`[${e.join("],[")}]`}toJSONFeatureCollection(){const e=[];return this._points.forEach(((t,n)=>{e.push(`{ "type": "Feature", "properties": { "index": ${n} }, "geometry": { "type": "MultiPoint", "coordinates": [ [ ${t.toString}  ] ] } }`)})),`{\n      "type": "FeatureCollection",\n      "name": "multipoint",\n      "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },\n      "features": [\n        ${e.join(",")}\n      ]\n    }`}}class Ae extends F{constructor(e,t,n){super(e,t),this._positionInLine=n}get positionInLine(){return this._positionInLine}static create(e,t){const n=e.split(" ");return new Ae(new O(parseFloat(n[0])),new T(parseFloat(n[1])),t)}}var Me;let je=Me=class{execute(e){const t=W(JSON.parse(`\n      {\n        "type": "LineString",\n        "coordinates": [${e.toString()}]\n      }`)),n=_e(t,{units:"meters"}),r=this.calculateDistanceBetweenPoints(n),s=new ke;return r>0?this.getIntermediatePoints(t,n,r).forEach((e=>{s.add(e)})):s.add(this.getFirstNode(e)),this.getAllNodesExceptFirst(e).forEach((e=>{s.add(e)})),s}calculateDistanceBetweenPoints(e){return Math.floor(e/Me.INTERMEDIATE_POINTS_IN_LINE)}getIntermediatePoints(e,t,n){let r;const s=[];for(let o=0;o<t;o+=n)r=Fe(e,o,{units:"meters"}),s.push(Ae.create(`${r.geometry.coordinates[0]} ${r.geometry.coordinates[1]}`,o));return s}getFirstNode(e){const t=W(JSON.parse(`\n    {\n      "type": "LineString",\n      "coordinates": [${e.subLine(0)}]\n    }`));return Ae.create(`${e.value[0].longitude.value} ${e.value[0].latitude.value}`,_e(t,{units:"meters"}))}getAllNodesExceptFirst(e){const t=[];for(let n=1;n<e.value.length;n++){const r=W(JSON.parse(`\n      {\n        "type": "LineString",\n        "coordinates": [${e.subLine(n)}]\n      }`));t.push(Ae.create(`${e.value[n].longitude.value} ${e.value[n].latitude.value}`,_e(r,{units:"meters"})))}return t}};je.INTERMEDIATE_POINTS_IN_LINE=100,je=Me=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L()],je);var Be=je;class $e{constructor(e,t,n,r){this._line=e,this._linePoints=t,this._wpsEndpoint=n,this._mdeLayerFullname=r}get line(){return this._line}get linePoints(){return this._linePoints}get wpsEndpoint(){return this._wpsEndpoint}get mdeLayerFullname(){return this._mdeLayerFullname}get mdeLayerShortname(){return this._mdeLayerFullname.value.indexOf(":")<0?this._mdeLayerFullname.value:this._mdeLayerFullname.value.split(":")[1]}get fullWpsEndpoint(){return`${this.wpsEndpoint.value}&request=Execute&identifier=gs:IntersectionFeatureCollection`}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?>\n\n\n    \x3c!-- IntersectionFeatureCollection --\x3e\n    <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n      <ows:Identifier>gs:IntersectionFeatureCollection</ows:Identifier>\n      <wps:DataInputs>\n        <wps:Input>\n          <ows:Identifier>first feature collection</ows:Identifier>\n          <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n            <wps:Body>\n          \n          \n    \x3c!-- BufferFeatureCollection --\x3e\n    <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n      <ows:Identifier>vec:BufferFeatureCollection</ows:Identifier>\n      <wps:DataInputs>\n        <wps:Input>\n          <ows:Identifier>features</ows:Identifier>\n          <wps:Data>\n            <wps:ComplexData mimeType="application/json"><![CDATA[\n              ${this._linePoints.toJSONFeatureCollection()}\n            ]]></wps:ComplexData>\n          </wps:Data>\n        </wps:Input>\n        <wps:Input>\n          <ows:Identifier>distance</ows:Identifier>\n          <wps:Data>\n            <wps:LiteralData>0.0000001</wps:LiteralData>\n          </wps:Data>\n        </wps:Input>\n      </wps:DataInputs>\n      <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n          <ows:Identifier>result</ows:Identifier>\n        </wps:RawDataOutput>\n      </wps:ResponseForm>\n    </wps:Execute>\n    \x3c!-- /BufferFeatureCollection --\x3e\n    \n    \n    \n            </wps:Body>\n          </wps:Reference>\n        </wps:Input>\n        <wps:Input>\n          <ows:Identifier>second feature collection</ows:Identifier>\n          <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n            <wps:Body>\n    \n    \n              \x3c!-- PolygonExtraction --\x3e\n              <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                <ows:Identifier>ras:PolygonExtraction</ows:Identifier>\n                <wps:DataInputs>\n                  <wps:Input>\n                    <ows:Identifier>data</ows:Identifier>\n                    <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wps" method="POST">\n                      <wps:Body>\n                          \n    \n    \n                        \x3c!-- CropCoverage --\x3e\n                        <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                          <ows:Identifier>ras:CropCoverage</ows:Identifier>\n                          <wps:DataInputs>\n                            <wps:Input>\n                              <ows:Identifier>coverage</ows:Identifier>\n                              <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n                                <wps:Body>\n                                  <wcs:GetCoverage service="WCS" version="1.1.1">\n                                    <ows:Identifier>${this._mdeLayerFullname.value}</ows:Identifier>\n                                    <wcs:DomainSubset>\n                                      <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                                        <ows:LowerCorner>-74.000000946 -55.666705466</ows:LowerCorner>\n                                        <ows:UpperCorner>-53.499547847 -21.666460109</ows:UpperCorner>\n                                      </ows:BoundingBox>\n                                    </wcs:DomainSubset>\n                                    <wcs:Output format="image/tiff"/>\n                                  </wcs:GetCoverage>\n                                </wps:Body>\n                              </wps:Reference>\n                            </wps:Input>\n                            <wps:Input>\n                              <ows:Identifier>cropShape</ows:Identifier>\n                              <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n                                <wps:Body>\n    \n    \n                                    \x3c!-- Buffer --\x3e\n                                    <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                                            <ows:Identifier>geo:buffer</ows:Identifier>\n                                            <wps:DataInputs>\n                                                <wps:Input>\n                                                <ows:Identifier>geom</ows:Identifier>\n                                                <wps:Data>\n                                                    <wps:ComplexData mimeType="application/json">\n                                                      <![CDATA[{\n                                                        "geometry": { "type": "MultiPoint", "coordinates": [${this._linePoints.toString()}]\n                                                      } }]]>\n                                                    </wps:ComplexData>\n                                                </wps:Data>\n                                                </wps:Input>\n                                                <wps:Input>\n                                                <ows:Identifier>distance</ows:Identifier>\n                                                <wps:Data>\n                                                    <wps:LiteralData>0.003</wps:LiteralData>\n                                                </wps:Data>\n                                                </wps:Input>\n                                                <wps:Input>\n                                                <ows:Identifier>capStyle</ows:Identifier>\n                                                <wps:Data>\n                                                    <wps:LiteralData>Square</wps:LiteralData>\n                                                </wps:Data>\n                                                </wps:Input>\n                                            </wps:DataInputs>\n                                            <wps:ResponseForm>\n                                                <wps:RawDataOutput mimeType="application/json">\n                                                <ows:Identifier>result</ows:Identifier>\n                                                </wps:RawDataOutput>\n                                            </wps:ResponseForm>\n                                    </wps:Execute>\n                                    \x3c!-- Buffer --\x3e\n    \n                                </wps:Body>\n                              </wps:Reference>\n                            </wps:Input>\n                          </wps:DataInputs>\n                          <wps:ResponseForm>\n                            <wps:RawDataOutput mimeType="image/tiff">\n                              <ows:Identifier>result</ows:Identifier>\n                            </wps:RawDataOutput>\n                          </wps:ResponseForm>\n                        </wps:Execute>\n                        \x3c!-- /CropCoverage --\x3e\n    \n    \n                      </wps:Body>\n                    </wps:Reference>\n                  </wps:Input>\n                  <wps:Input>\n                    <ows:Identifier>roi</ows:Identifier>\n                    <wps:Reference mimeType="application/json" xlink:href="http://geoserver/wps" method="POST">\n                      <wps:Body>\n    \n    \n                          \x3c!-- Buffer --\x3e\n                          <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n                                <ows:Identifier>geo:buffer</ows:Identifier>\n                                <wps:DataInputs>\n                                    <wps:Input>\n                                    <ows:Identifier>geom</ows:Identifier>\n                                    <wps:Data>\n                                        <wps:ComplexData mimeType="application/json">\n                                          <![CDATA[{\n                                            "geometry": { "type": "MultiPoint", "coordinates": [${this._linePoints.toString()}]\n                                          } }]]>\n                                        </wps:ComplexData>\n                                    </wps:Data>\n                                    </wps:Input>\n                                    <wps:Input>\n                                    <ows:Identifier>distance</ows:Identifier>\n                                    <wps:Data>\n                                        <wps:LiteralData>0.001</wps:LiteralData>\n                                    </wps:Data>\n                                    </wps:Input>\n                                    <wps:Input>\n                                    <ows:Identifier>capStyle</ows:Identifier>\n                                    <wps:Data>\n                                        <wps:LiteralData>Square</wps:LiteralData>\n                                    </wps:Data>\n                                    </wps:Input>\n                                </wps:DataInputs>\n                                <wps:ResponseForm>\n                                    <wps:RawDataOutput mimeType="application/json">\n                                    <ows:Identifier>result</ows:Identifier>\n                                    </wps:RawDataOutput>\n                                </wps:ResponseForm>\n                          </wps:Execute>\n                          \x3c!-- Buffer --\x3e\n    \n    \n    \n                      </wps:Body>\n                    </wps:Reference>\n                  </wps:Input>\n                  <wps:Input>\n                    <ows:Identifier>band</ows:Identifier>\n                    <wps:Data>\n                      <wps:LiteralData>0</wps:LiteralData>\n                    </wps:Data>\n                  </wps:Input>\n                </wps:DataInputs>\n                <wps:ResponseForm>\n                  <wps:RawDataOutput mimeType="application/json">\n                    <ows:Identifier>result</ows:Identifier>\n                  </wps:RawDataOutput>\n                </wps:ResponseForm>\n              </wps:Execute>\n              \x3c!-- /PolygonExtraction --\x3e\n    \n    \n            </wps:Body>\n          </wps:Reference>\n        </wps:Input>\n      </wps:DataInputs>\n      <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n          <ows:Identifier>result</ows:Identifier>\n        </wps:RawDataOutput>\n      </wps:ResponseForm>\n    </wps:Execute>\n    \x3c!-- /IntersectionFeatureCollection --\x3e`}}$e.MAX_LENGHT_ALLOWED=100,$e.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["line"],\n        "points": ["ne", "sw"]\n      }\n    ]');let Ne=class{ensureInputDataIsInTolerance(e){}};Ne=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L()],Ne);var We,qe=Ne;!function(e){e[e.LineString3D=0]="LineString3D",e[e.FeatureCollectionOfLines=1]="FeatureCollectionOfLines"}(We||(We={}));class Ue extends P{constructor(e){super(e)}}class Ve{constructor(e,t,n){this._longitude=e,this._latitude=t,this._height=n}get value(){return[this._longitude,this._latitude,this._height]}get longitude(){return this._longitude}get latitude(){return this._latitude}get height(){return this._height}get toString(){return`${this._longitude.value},${this._latitude.value},${this._height.value}`}get toString2D(){return`${this._longitude.value},${this._latitude.value}`}toProcessString(){return`${this._longitude.value} ${this._latitude.value} ${this._height.value}`}static createFromString(e){const t=e.split(" ");return new Ve(new O(parseFloat(t[0])),new T(parseFloat(t[1])),new Ue(parseFloat(t[2])))}}class Ge{constructor(e){this._value=e}static createFromString(e){const t=[];return e.trim().replace("\n","").replace("  "," ").replace("  "," ").split(",").forEach((e=>{const n=e.trim().split(" ");t.push(new Ve(new O(parseFloat(n[0])),new T(parseFloat(n[1])),new T(parseFloat(n[2]))))})),new Ge(t)}get value(){return this._value}toString(){const e=[];return this.value.forEach((t=>{e.push(t.toString)})),`[${e.join("],[")}]`}toProcessString(){const e=[];return this.value.forEach((t=>{e.push(t.toProcessString())})),`${e.join(",")}`}toLineString3D(){return'{ "type": "LineString", "coordinates": ['+this.toString()+"] }"}toFeatureCollection(){const e=[];for(let t=1;t<this._value.length;t++)e[t-1]=`{\n        "type": "Feature",\n        "geometry": {\n          "type": "MultiLineString",\n          "coordinates": [\n            [\n              [ ${this._value[t-1].toString2D} ], [ ${this._value[t].toString2D} ]\n            ]\n          ]\n        },\n        "properties": {\n          "index": ${t},\n          "initial_height": ${this._value[t-1].height.value},\n          "final_height": ${this._value[t].height.value}\n        },\n        "id": "${t-1}"\n      }`;return`{\n      "type": "FeatureCollection",\n      "features": [ ${e.join(",")} ]\n    }`}}var Xe=function(e,t){return function(n,r){t(n,r,e)}};let Je=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return $e.FIELDS}execute(e,t){return n=this,r=void 0,o=function*(){this.ensureInputDataIsInTolerance(e);const n=yield this.postman.post(e.fullWpsEndpoint,e.xmlInput),r=this.generateLine3DFromResponse(e,n);return this.formatResponse(r,t)},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,a)}p((o=o.apply(n,r||[])).next())}));var n,r,s,o}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}generateLine3DFromResponse(e,t){const n=t,r=[];if(n.features.sort(((e,t)=>e.properties.feature_index<t.properties.feature_index?-1:e.properties.feature_index>t.properties.feature_index?1:0)),e.linePoints.points.forEach((function(t,s){for(const o in n.features)if(n.features[o].properties.feature_index==s){r.push(new Ve(t.longitude,t.latitude,new Ue(n.features[s].properties[e.mdeLayerShortname+"_value"])));break}})),1==r.length){const t=e.linePoints.points[e.linePoints.points.length-1];r.push(new Ve(t.longitude,t.latitude,new Ue(n.features[0].properties[e.mdeLayerShortname+"_value"])))}return new Ge(r)}formatResponse(e,t){return t===We.FeatureCollectionOfLines?JSON.parse(e.toFeatureCollection()):JSON.parse(e.toLineString3D())}};Je=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L(),Xe(0,S("Postman")),Xe(1,S("ElevationProfileToleranceChecker"))],Je);var Ke=Je;D.register("Postman",{useClass:M}),D.register("ElevationProfileToleranceChecker",{useClass:qe}),D.register("LineToPointsInterval",{useClass:Be});let Qe=class{constructor(e,t,n,r){this.host=e,this.mdeLayerFullname=t,this.lineToPoint=new Be,this.service=r||D.resolve(Ke)}getFields(){return this.service.getFields()}execute(e,t=We.LineString3D){return n=this,r=void 0,o=function*(){const n=be.createFromString(e),r=new $e(n,this.lineToPoint.execute(n),new A(this.host),new C(this.mdeLayerFullname));return this.service.execute(r,t)},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,a)}p((o=o.apply(n,r||[])).next())}));var n,r,s,o}};var ze,He;Qe=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L(),(ze=2,He=S("LineToPointsInterval"),function(e,t){He(e,t,ze)})],Qe);var Ye=Qe;class Ze{status(){return"Ok"}}class et extends P{constructor(e){super(e),this.ensureIsValidLevel()}ensureIsValidLevel(){if(this.value<0||this.value>1e4)throw RangeError("The equidistance must be between 0 and 10000")}}class tt{constructor(e,t,n,r){this._polygon=e,this._level=t,this._wpsEndpoint=n,this._mdeLayerFullname=r}get polygon(){return this._polygon}get level(){return this._level}get wpsEndpoint(){return this._wpsEndpoint}rectangle(){return this._polygon.toString()}get fullWpsEndpoint(){return`${this.wpsEndpoint.value}&request=Execute&identifier=ras:PolygonExtraction`}get xmlInput(){return`<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>ras:PolygonExtraction</ows:Identifier>\n    <wps:DataInputs>\n      <wps:Input>\n        <ows:Identifier>data</ows:Identifier>\n        <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wps" method="POST">\n          <wps:Body>\n            \n            <wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n              <ows:Identifier>ras:CropCoverage</ows:Identifier>\n              <wps:DataInputs>\n                <wps:Input>\n                  <ows:Identifier>coverage</ows:Identifier>\n                  <wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST">\n                    <wps:Body>\n                      <wcs:GetCoverage service="WCS" version="1.1.1">\n                        <ows:Identifier>${this._mdeLayerFullname.value}</ows:Identifier>\n                        <wcs:DomainSubset>\n                          <ows:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326">\n                            <ows:LowerCorner>-74.000000946 -55.666705466</ows:LowerCorner>\n                            <ows:UpperCorner>-53.499547847 -21.666460109</ows:UpperCorner>\n                          </ows:BoundingBox>\n                        </wcs:DomainSubset>\n                        <wcs:Output format="image/tiff"/>\n                      </wcs:GetCoverage>\n                    </wps:Body>\n                  </wps:Reference>\n                </wps:Input>\n                <wps:Input>\n                  <ows:Identifier>cropShape</ows:Identifier>\n                  <wps:Data>\n                  <wps:ComplexData mimeType="application/json"><![CDATA[{\n                    "geometry": {\n                    "type": "Polygon",\n                    "coordinates": [ ${this.rectangle()} ] } }]]></wps:ComplexData>\n                  </wps:Data>\n                </wps:Input>\n              </wps:DataInputs>\n              <wps:ResponseForm>\n                <wps:RawDataOutput mimeType="image/tiff">\n                  <ows:Identifier>result</ows:Identifier>\n                </wps:RawDataOutput>\n              </wps:ResponseForm>\n            </wps:Execute>\n\n          </wps:Body>\n        </wps:Reference>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>roi</ows:Identifier>\n        <wps:Data>\n            <wps:ComplexData mimeType="application/json"><![CDATA[{\n              "geometry": {\n              "type": "Polygon",\n              "coordinates": [ ${this.rectangle()} ] } }]]></wps:ComplexData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>band</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>0</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n      <wps:Input>\n        <ows:Identifier>ranges</ows:Identifier>\n        <wps:Data>\n          <wps:LiteralData>[-9999;${this._level.value}]</wps:LiteralData>\n        </wps:Data>\n      </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n      <wps:RawDataOutput mimeType="application/json">\n        <ows:Identifier>result</ows:Identifier>\n      </wps:RawDataOutput>\n    </wps:ResponseForm>\n  </wps:Execute>`}}tt.MAX_AREA_ALLOWED=1e8,tt.FIELDS=JSON.parse('[\n      {\n        "name": "Capa",\n        "element": "select",\n        "references": "drawedLayers",\n        "allowedTypes": ["rectangle"],\n        "points": ["ne", "sw"]\n      },\n      {\n        "name": "Cota",\n        "element": "input",\n        "type": "number",\n        "min": 0,\n        "max": 10000\n      }\n    ]');let nt=class{ensureInputDataIsInTolerance(e){if(H(this.pointsToPolygon(e.polygon))>tt.MAX_AREA_ALLOWED)throw RangeError("The area requested must be less than 100km2")}pointsToPolygon(e){return U(e.coordinates())}};nt=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L()],nt);var rt=nt,st=function(e,t){return function(n,r){t(n,r,e)}};let ot=class{constructor(e,t){this.postman=e,this.tolaranceChecker=t}getFields(){return tt.FIELDS}execute(e){return t=this,n=void 0,s=function*(){return this.ensureInputDataIsInTolerance(e),yield this.postman.post(e.fullWpsEndpoint,e.xmlInput)},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{p(s.next(e))}catch(e){o(e)}}function a(e){try{p(s.throw(e))}catch(e){o(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,a)}p((s=s.apply(t,n||[])).next())}));var t,n,r,s}ensureInputDataIsInTolerance(e){this.tolaranceChecker.ensureInputDataIsInTolerance(e)}};ot=function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}([L(),st(0,S("Postman")),st(1,S("WaterRiseToleranceChecker"))],ot);var it=ot;D.register("Postman",{useClass:M}),D.register("WaterRiseToleranceChecker",{useClass:rt});class at{constructor(e,t,n){this.host=e,this.mdeLayerFullname=t,this.service=n||D.resolve(it)}getFields(){return this.service.getFields()}execute(e,t){return n=this,r=void 0,o=function*(){const n=new tt(k.createFromString(e),new et(t),new A(this.host),new C(this.mdeLayerFullname));return this.service.execute(n)},new((s=void 0)||(s=Promise))((function(e,t){function i(e){try{p(o.next(e))}catch(e){t(e)}}function a(e){try{p(o.throw(e))}catch(e){t(e)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,a)}p((o=o.apply(n,r||[])).next())}));var n,r,s,o}}}(),GeoserviceFactory=r}();
//# sourceMappingURL=main.js.map